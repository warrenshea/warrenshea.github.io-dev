@use 'sass:math';

@each $mediaquery in $mediaqueries {
  $breakpoint: nth($mediaquery, 1);
  $prefix: nth($mediaquery, 2);

  @include breakpoint($breakpoint) {
    @for $i from 1 through 12 {
      $percentage-num: math.div(100, 12);
      $percentage: $i * $percentage-num * 1%;
      .#{$prefix}w\:#{$i} {
        flex: 0 0 $percentage;
        max-width: calc(#{$percentage} - var(--column-gap) + var(--column-gap) * #{math.div($i * $percentage-num, 100)});
      }

      .#{$prefix}w0\:#{$i} {
        flex: 0 0 $percentage;
        max-width: $percentage;
      }
    }
  }
}

@each $mediaquery in $mediaqueries {
  $breakpoint: nth($mediaquery, 1);
  $prefix: nth($mediaquery, 2);

  @include breakpoint($breakpoint) {
    .#{$prefix}w-split\:1,
    .#{$prefix}w-split\:2,
    .#{$prefix}w-split\:3,
    .#{$prefix}w-split\:4,
    .#{$prefix}w-split\:5,
    .#{$prefix}w-split\:6,
    .#{$prefix}w-split\:7,
    .#{$prefix}w-split\:8 {
      flex-wrap: wrap;
    }
    .#{$prefix}w-split\:1 > * {
      flex: 0 0 100%;
      max-width: 100%;
    }
    .#{$prefix}w-split\:2 > * {
      flex: 0 0 50%;
      max-width: calc(50% - var(--column-gap) + var(--column-gap) * math.div(1, 2));
    }
    .#{$prefix}w0-split\:2 > * {
      flex: 0 0 50%;
      max-width: 50%;
    }
    .#{$prefix}w-split\:3 > * {
      flex: 0 0 33.33333%;
      max-width: calc(33.33333% - var(--column-gap) + var(--column-gap) * math.div(1, 3));
    }
    .#{$prefix}w0-split\:3 > * {
      flex: 0 0 33.33333%;
      max-width: 33.33333%;
    }
    .#{$prefix}w-split\:4 > * {
      flex: 0 0 25%;
      max-width: calc(25% - var(--column-gap) + var(--column-gap) * math.div(1, 4));
    }
    .#{$prefix}w0-split\:4 > * {
      flex: 0 0 25%;
      max-width: 25%;
    }
  }
}

.row.sm\+\:unstack > * {
  flex: 1 1 0px;
}

.row.md\+\:unstack > * {
  flex: 0 0 100%;
}
@include breakpoint(medium) {
  .row.md\+\:unstack > * {
    flex: 1 1 0px;
  }
}

.row.lg\+\:unstack > * {
  flex: 0 0 100%;
}
@include breakpoint(large) {
  .row.lg\+\:unstack > * {
    flex: 1 1 0px;
  }
}

.row.xl\+\:unstack > * {
  flex: 0 0 100%;
}
@include breakpoint(xlarge) {
  .row.xl\+\:unstack > * {
    flex: 1 1 0px;
  }
}